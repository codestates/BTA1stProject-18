{"ast":null,"code":"var Class = require(\"o3\").Class,\n  abstractMethod = require(\"o3\").abstractMethod,\n  eachCombination = require(\"u3\").eachCombination,\n  cache = require(\"u3\").cache,\n  capability = require(\"capability\");\nvar AbstractFrameStringSource = Class(Object, {\n  prototype: {\n    captureFrameStrings: function (frameShifts) {\n      var error = this.createError();\n      frameShifts.unshift(this.captureFrameStrings);\n      frameShifts.unshift(this.createError);\n      var capturedFrameStrings = this.getFrameStrings(error);\n      var frameStrings = capturedFrameStrings.slice(frameShifts.length),\n        functionValues = [];\n      if (capability(\"arguments.callee.caller\")) {\n        var capturedFunctionValues = [this.createError, this.captureFrameStrings];\n        try {\n          var aCaller = arguments.callee;\n          while (aCaller = aCaller.caller) capturedFunctionValues.push(aCaller);\n        } catch (useStrictError) {}\n        functionValues = capturedFunctionValues.slice(frameShifts.length);\n      }\n      return {\n        frameStrings: frameStrings,\n        functionValues: functionValues\n      };\n    },\n    getFrameStrings: function (error) {\n      var message = error.message || \"\";\n      var name = error.name || \"\";\n      var stackString = this.getStackString(error);\n      if (stackString === undefined) return;\n      var stackStringChunks = stackString.split(\"\\n\");\n      var fromPosition = 0;\n      var toPosition = stackStringChunks.length;\n      if (this.hasHeader) fromPosition += name.split(\"\\n\").length + message.split(\"\\n\").length - 1;\n      if (this.hasFooter) toPosition -= 1;\n      return stackStringChunks.slice(fromPosition, toPosition);\n    },\n    createError: abstractMethod,\n    getStackString: abstractMethod,\n    hasHeader: undefined,\n    hasFooter: undefined\n  }\n});\nvar FrameStringSourceCalibrator = Class(Object, {\n  prototype: {\n    calibrateClass: function (FrameStringSource) {\n      return this.calibrateMethods(FrameStringSource) && this.calibrateEnvelope(FrameStringSource);\n    },\n    calibrateMethods: function (FrameStringSource) {\n      try {\n        eachCombination([[function (message) {\n          return new Error(message);\n        }, function (message) {\n          try {\n            throw new Error(message);\n          } catch (error) {\n            return error;\n          }\n        }], [function (error) {\n          return error.stack;\n        }, function (error) {\n          return error.stacktrace;\n        }]], function (createError, getStackString) {\n          if (getStackString(createError())) throw {\n            getStackString: getStackString,\n            createError: createError\n          };\n        });\n      } catch (workingImplementation) {\n        Class.merge.call(FrameStringSource, {\n          prototype: workingImplementation\n        });\n        return true;\n      }\n      return false;\n    },\n    calibrateEnvelope: function (FrameStringSource) {\n      var getStackString = FrameStringSource.prototype.getStackString;\n      var createError = FrameStringSource.prototype.createError;\n      var calibratorStackString = getStackString(createError(\"marker\"));\n      var calibratorFrameStrings = calibratorStackString.split(\"\\n\");\n      Class.merge.call(FrameStringSource, {\n        prototype: {\n          hasHeader: /marker/.test(calibratorFrameStrings[0]),\n          hasFooter: calibratorFrameStrings[calibratorFrameStrings.length - 1] === \"\"\n        }\n      });\n      return true;\n    }\n  }\n});\nmodule.exports = {\n  getClass: cache(function () {\n    var FrameStringSource;\n    if (FrameStringSource) return FrameStringSource;\n    FrameStringSource = Class(AbstractFrameStringSource, {});\n    var calibrator = new FrameStringSourceCalibrator();\n    if (!calibrator.calibrateClass(FrameStringSource)) throw new Error(\"Cannot read Error.prototype.stack in this environment.\");\n    return FrameStringSource;\n  }),\n  getInstance: cache(function () {\n    var FrameStringSource = this.getClass();\n    var instance = new FrameStringSource();\n    return instance;\n  })\n};","map":{"version":3,"names":["Class","require","abstractMethod","eachCombination","cache","capability","AbstractFrameStringSource","Object","prototype","captureFrameStrings","frameShifts","error","createError","unshift","capturedFrameStrings","getFrameStrings","frameStrings","slice","length","functionValues","capturedFunctionValues","aCaller","arguments","callee","caller","push","useStrictError","message","name","stackString","getStackString","undefined","stackStringChunks","split","fromPosition","toPosition","hasHeader","hasFooter","FrameStringSourceCalibrator","calibrateClass","FrameStringSource","calibrateMethods","calibrateEnvelope","Error","stack","stacktrace","workingImplementation","merge","call","calibratorStackString","calibratorFrameStrings","test","module","exports","getClass","calibrator","getInstance","instance"],"sources":["/Users/dahan/Desktop/blockchain/BTA1stProject-18/near-pocket/node_modules/error-polyfill/lib/non-v8/FrameStringSource.js"],"sourcesContent":["var Class = require(\"o3\").Class,\r\n    abstractMethod = require(\"o3\").abstractMethod,\r\n    eachCombination = require(\"u3\").eachCombination,\r\n    cache = require(\"u3\").cache,\r\n    capability = require(\"capability\");\r\n\r\nvar AbstractFrameStringSource = Class(Object, {\r\n    prototype: {\r\n        captureFrameStrings: function (frameShifts) {\r\n            var error = this.createError();\r\n            frameShifts.unshift(this.captureFrameStrings);\r\n            frameShifts.unshift(this.createError);\r\n            var capturedFrameStrings = this.getFrameStrings(error);\r\n\r\n            var frameStrings = capturedFrameStrings.slice(frameShifts.length),\r\n                functionValues = [];\r\n\r\n            if (capability(\"arguments.callee.caller\")) {\r\n                var capturedFunctionValues = [\r\n                    this.createError,\r\n                    this.captureFrameStrings\r\n                ];\r\n                try {\r\n                    var aCaller = arguments.callee;\r\n                    while (aCaller = aCaller.caller)\r\n                        capturedFunctionValues.push(aCaller);\r\n                }\r\n                catch (useStrictError) {\r\n                }\r\n                functionValues = capturedFunctionValues.slice(frameShifts.length);\r\n            }\r\n            return {\r\n                frameStrings: frameStrings,\r\n                functionValues: functionValues\r\n            };\r\n        },\r\n        getFrameStrings: function (error) {\r\n            var message = error.message || \"\";\r\n            var name = error.name || \"\";\r\n            var stackString = this.getStackString(error);\r\n            if (stackString === undefined)\r\n                return;\r\n            var stackStringChunks = stackString.split(\"\\n\");\r\n            var fromPosition = 0;\r\n            var toPosition = stackStringChunks.length;\r\n            if (this.hasHeader)\r\n                fromPosition += name.split(\"\\n\").length + message.split(\"\\n\").length - 1;\r\n            if (this.hasFooter)\r\n                toPosition -= 1;\r\n            return stackStringChunks.slice(fromPosition, toPosition);\r\n        },\r\n        createError: abstractMethod,\r\n        getStackString: abstractMethod,\r\n        hasHeader: undefined,\r\n        hasFooter: undefined\r\n    }\r\n});\r\n\r\nvar FrameStringSourceCalibrator = Class(Object, {\r\n    prototype: {\r\n        calibrateClass: function (FrameStringSource) {\r\n            return this.calibrateMethods(FrameStringSource) && this.calibrateEnvelope(FrameStringSource);\r\n        },\r\n        calibrateMethods: function (FrameStringSource) {\r\n            try {\r\n                eachCombination([[\r\n                    function (message) {\r\n                        return new Error(message);\r\n                    },\r\n                    function (message) {\r\n                        try {\r\n                            throw new Error(message);\r\n                        }\r\n                        catch (error) {\r\n                            return error;\r\n                        }\r\n                    }\r\n                ], [\r\n                    function (error) {\r\n                        return error.stack;\r\n                    },\r\n                    function (error) {\r\n                        return error.stacktrace;\r\n                    }\r\n                ]], function (createError, getStackString) {\r\n                    if (getStackString(createError()))\r\n                        throw {\r\n                            getStackString: getStackString,\r\n                            createError: createError\r\n                        };\r\n                });\r\n            } catch (workingImplementation) {\r\n                Class.merge.call(FrameStringSource, {\r\n                    prototype: workingImplementation\r\n                });\r\n                return true;\r\n            }\r\n            return false;\r\n        },\r\n        calibrateEnvelope: function (FrameStringSource) {\r\n            var getStackString = FrameStringSource.prototype.getStackString;\r\n            var createError = FrameStringSource.prototype.createError;\r\n            var calibratorStackString = getStackString(createError(\"marker\"));\r\n            var calibratorFrameStrings = calibratorStackString.split(\"\\n\");\r\n            Class.merge.call(FrameStringSource, {\r\n                prototype: {\r\n                    hasHeader: /marker/.test(calibratorFrameStrings[0]),\r\n                    hasFooter: calibratorFrameStrings[calibratorFrameStrings.length - 1] === \"\"\r\n                }\r\n            });\r\n            return true;\r\n        }\r\n    }\r\n});\r\n\r\n\r\nmodule.exports = {\r\n    getClass: cache(function () {\r\n        var FrameStringSource;\r\n        if (FrameStringSource)\r\n            return FrameStringSource;\r\n        FrameStringSource = Class(AbstractFrameStringSource, {});\r\n        var calibrator = new FrameStringSourceCalibrator();\r\n        if (!calibrator.calibrateClass(FrameStringSource))\r\n            throw new Error(\"Cannot read Error.prototype.stack in this environment.\");\r\n        return FrameStringSource;\r\n    }),\r\n    getInstance: cache(function () {\r\n        var FrameStringSource = this.getClass();\r\n        var instance = new FrameStringSource();\r\n        return instance;\r\n    })\r\n};"],"mappings":"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"},"metadata":{},"sourceType":"script"}